#!/bin/bash
# Rudder MCP - Stdio conductor for Claude Code (dist mode)
# Auto-installed by install.sh
#
# Runs mcp-conductor.js in stdio mode (no --socket/--port).
# Claude Code launches this on demand â€” no daemon required.
#
# Uses node with compiled .js files from .sailing/rudder.

set -e

PROJECT_ROOT="$(realpath "$(dirname "$0")/..")"

SAILING_SOURCE="$PROJECT_ROOT/.sailing/rudder"

export SAILING_PROJECT="$PROJECT_ROOT"

# Dist mode: use node with compiled JS files
exec node "$SAILING_SOURCE/conductor/mcp-conductor.js" --project-root "$PROJECT_ROOT" "$@"
