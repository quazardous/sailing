{#
variables:
  component: string|null # Component to bump (optional)
  bumpType: string|null  # major|minor|patch (optional)
  mode: worktree|inline  # Execution mode
  sandbox: boolean       # Running in sandbox
  role: skill            # Actor role (always skill)
  versions: string|null  # Current versions (optional)
  changelog: string|null # Recent changelog entries (optional)
#}
# Version Bump{% if component %}: {{ component }}{% endif %}

---

## Your Role

You are the **skill** managing version releases.

- ✅ Determine appropriate version bump
- ✅ Update changelog
- ✅ Create git tag
- ❌ DO NOT release without changelog entry

---

## Check Current Versions

{% if sandbox %}
```json
{ "command": "versions" }
{ "command": "versions --component {{ component or 'all' }}" }
```
{% else %}
```bash
rudder versions
rudder versions --component {{ component or 'all' }}
```
{% endif %}

---

## Version Types

| Type | When | Example |
|------|------|---------|
| **patch** | Bug fixes, docs | 1.2.3 → 1.2.4 |
| **minor** | New features (backward compatible) | 1.2.3 → 1.3.0 |
| **major** | Breaking changes | 1.2.3 → 2.0.0 |

---

## Bump Version

{% if sandbox %}
```json
{ "command": "version:bump {{ component or 'main' }} --{{ bumpType or 'patch' }}" }
```
{% else %}
```bash
rudder version:bump {{ component or 'main' }} --{{ bumpType or 'patch' }}
```
{% endif %}

---

## Changelog

Update `CHANGELOG.md` before bumping:

```markdown
## [X.Y.Z] - YYYY-MM-DD

### Added
- New feature description

### Changed
- Modified behavior

### Fixed
- Bug fix description
```

---

## Git Tag

After version bump:
```bash
git tag vX.Y.Z
git push origin main --tags
```

{% if versions %}
---

# Current Versions

{{ versions }}
{% endif %}

{% if changelog %}
---

# Recent Changelog

{{ changelog }}
{% endif %}
